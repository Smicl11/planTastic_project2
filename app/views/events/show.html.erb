<div class="container event-container">
  <div class="row">
    <h1 class="eventTitle"><%= @event.title %></h1>
  </div>
  <div class="col-md-6">
    <div class="row">
      <%= image_tag (@event.photo), class: "img-responsive img-thumbnail" %>
    </div>
    <div class="row">
      <h2>What?</h2>
      <p><%= @event.description%></p>
    </div>
    <div class="row">
      <h2>Where?</h2>
      <p><%= @event.location%></p>
    </div>
    <div class="row">
      <h2>When?</h2>
      <p>Date: <%= @event.event_date %></p>
      <p>Time: <%= @event.event_time %></p>
    </div>
    <div class="group btn-group">
      <% if current_user%>
        <div class="inner"><%= button_to "Edit", edit_event_path(@event), :method => "get", class: "btn btn-small btn-success"%></div>
        <div class="inner"><%= button_to "Delete Event", delete_event_path, data: {:confirm=>'Are you sure you want to delete this event?'}, :method => "delete", class: "btn btn-small btn-danger" %></div>
        <div class="inner"><%= button_to "Attend", new_attendance_path(@event), :method => "get", class: "btn btn-small btn-primary" %></div>
      <% else %>
        <%= button_to "Login", login_path, :method => "get", class: "btn btn-small btn-primary" %>
      <% end %>
    </div>
  </div>

  <div class="col-md-6">
      <h1>Comments:</h1>
      <% @comments.each do |comment|%>
      <p><%= comment.description %></p>
      <p><%= link_to 'Destroy', delete_comment_path(@event, comment), data: {:confirm => 'Are you sure?'}, :method => :delete %> </p>
    <% end %>
      <%= button_to "Add Comment", new_comment_path, :method => "get", class: "btn btn-small btn-primary"%>
  </div>

</div>

<% if current_user %>
<div class="container">
  <h1>Who's Going:</h1>
  <div class="col-xs-12 attendances">
    <% @event.attendances.each do |attendance| %>
    <div class="col-md-3">
      <div class = "row">
        <%= image_tag (attendance.user.profile_image), class: "img-responsive img-circle userpic", size:"140x140" %>
      </div>
      <div class="row">
        <%= attendance.user.first_name %>
      </div>
      <div class="row">
        <%= attendance.contribution %>
      </div>
    </div>
    <% end %>
  </div>
<% else %>
  <div class="container">
    <h1>Please login to see who's attending this event!</h1>
  </div>
<% end %>
</div>


<div id="map-container">
  <div id="map"></div>
  <script>
        var map;
        function initMap() {
          map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: -34.397, lng: 150.644},
            zoom: 8
          });
        }
      </script>
      <script src="https://maps.googleapis.com/maps/api/js?key=<%ENV['SECRET_KEY']%>&callback=initMap"
      async defer></script>
